### Ratelimiter

HTTP-сервис, способный ограничивать количество запросов из одной подсети IPv4. Если ограничения отсутствуют, выдаёт одинаковый статический контент. 

IP-адрес берётся из заголовка запроса `X-Forwarded-For`

#### Алгоритм ограничения

Ratelimiter использует алгоритм Sliding Window -- на любом отрезке времени (размере окна) допускается лишь не более определённого количества запросов. 

Реализовано с помощью буферизированного канала, хранящего токены. При входящем запросе происходит попытка прочитать токен из канала:
- в случае успеха запускается горутина, возвращающая токен в канал по истечении времени равного размеру окна
- в случае неудачи (если все токены закончились) Ratelimiter переходит в состояние блокировки

#### Разделение ответственности

Ratelimiter вынесен на уровень сервиса чтобы не завязываться на HTTP имплементации. На уровне роутера написано middleware вызывающее методы Ratelimiter'а.

#### Конфигурация

Небольшой конфиг подтягивается из файла `config.yml` и позволяет задать размер префикса подсети, лимит, размер окна и время блокировки.

#### Репозиторий с заданиями

https://github.com/avito-tech/antibot-developer-trainee